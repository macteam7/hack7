int led = D0;
int beep = A0;
int button = D2;

int buttonVal = 0;
int buttonState = 0;
int oldButtonState = 0;

double temperature = 0.0;

void setup()
{
    Spark.variable("temperature", &temperature, DOUBLE);

    // Output pins
    pinMode(led, OUTPUT);
    pinMode(beep, OUTPUT);

    // Input pins
    pinMode(button, INPUT);
    pinMode(A7, INPUT);
    
    Serial.begin(9600);
}

// This routine loops forever
void loop()
{
    oldButtonState = buttonState;
    buttonVal = digitalRead(button);
    if(buttonVal == LOW)
    {
        buttonState = 1;
    }
    else
    {
        buttonState = 0;
    }
    
    if (buttonState != oldButtonState && buttonState == 1)
    {
        digitalWrite(led, HIGH);
        analogWrite(beep, 200);
        delay(1000);
        digitalWrite(led, LOW);
        analogWrite(beep, 0);
    }
    
    int reading = 0;
    double kelvin = 0.0;
    reading = analogRead(A7);
    kelvin = reading*(3.3/4096)*100;
    temperature = kelvin - 273;
    Serial.println("Temperature " + String(temperature));
}